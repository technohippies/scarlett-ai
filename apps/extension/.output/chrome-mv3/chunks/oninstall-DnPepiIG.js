import"./_virtual_wxt-html-plugins-DPbbfBKe.js";const Y=!1,Z=(t,e)=>t===e,A={equals:Z};let H=W;const m=1,_=2,q={owned:null,cleanups:null,context:null,owner:null};var b=null;let D=null,tt=null,u=null,d=null,w=null,O=0;function et(t,e){const s=u,r=b,l=t.length===0,o=e===void 0?r:e,i=l?q:{owned:null,cleanups:null,context:o?o.context:null,owner:o},n=l?t:()=>t(()=>I(()=>v(i)));b=i,u=null;try{return T(n,!0)}finally{u=s,b=r}}function V(t,e){e=e?Object.assign({},A,e):A;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=l=>(typeof l=="function"&&(l=l(s.value)),Q(s,l));return[K.bind(s),r]}function j(t,e,s){const r=M(t,e,!1,m);$(r)}function st(t,e,s){H=it;const r=M(t,e,!1,m);r.user=!0,w?w.push(r):$(r)}function rt(t,e,s){s=s?Object.assign({},A,s):A;const r=M(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=s.equals||void 0,$(r),K.bind(r)}function I(t){if(u===null)return t();const e=u;u=null;try{return t()}finally{u=e}}function ot(t){st(()=>I(t))}function K(){if(this.sources&&this.state)if(this.state===m)$(this);else{const t=d;d=null,T(()=>C(this),!1),d=t}if(u){const t=this.observers?this.observers.length:0;u.sources?(u.sources.push(this),u.sourceSlots.push(t)):(u.sources=[this],u.sourceSlots=[t]),this.observers?(this.observers.push(u),this.observerSlots.push(u.sources.length-1)):(this.observers=[u],this.observerSlots=[u.sources.length-1])}return this.value}function Q(t,e,s){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&T(()=>{for(let l=0;l<t.observers.length;l+=1){const o=t.observers[l],i=D&&D.running;i&&D.disposed.has(o),(i?!o.tState:!o.state)&&(o.pure?d.push(o):w.push(o),o.observers&&X(o)),i||(o.state=m)}if(d.length>1e6)throw d=[],new Error},!1)),e}function $(t){if(!t.fn)return;v(t);const e=O;nt(t,t.value,e)}function nt(t,e,s){let r;const l=b,o=u;u=b=t;try{r=t.fn(e)}catch(i){return t.pure&&(t.state=m,t.owned&&t.owned.forEach(v),t.owned=null),t.updatedAt=s+1,J(i)}finally{u=o,b=l}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?Q(t,r):t.value=r,t.updatedAt=s)}function M(t,e,s,r=m,l){const o={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:b,context:b?b.context:null,pure:s};return b===null||b!==q&&(b.owned?b.owned.push(o):b.owned=[o]),o}function E(t){if(t.state===0)return;if(t.state===_)return C(t);if(t.suspense&&I(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<O);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===m)$(t);else if(t.state===_){const r=d;d=null,T(()=>C(t,e[0]),!1),d=r}}function T(t,e){if(d)return t();let s=!1;e||(d=[]),w?s=!0:w=[],O++;try{const r=t();return lt(s),r}catch(r){s||(w=null),d=null,J(r)}}function lt(t){if(d&&(W(d),d=null),t)return;const e=w;w=null,e.length&&T(()=>H(e),!1)}function W(t){for(let e=0;e<t.length;e++)E(t[e])}function it(t){let e,s=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[s++]=r:E(r)}for(e=0;e<s;e++)E(t[e])}function C(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const r=t.sources[s];if(r.sources){const l=r.state;l===m?r!==e&&(!r.updatedAt||r.updatedAt<O)&&E(r):l===_&&C(r,e)}}}function X(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=_,s.pure?d.push(s):w.push(s),s.observers&&X(s))}}function v(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),r=t.sourceSlots.pop(),l=s.observers;if(l&&l.length){const o=l.pop(),i=s.observerSlots.pop();r<l.length&&(o.sourceSlots[i]=r,l[r]=o,s.observerSlots[r]=i)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)v(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)v(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function at(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function J(t,e=b){throw at(t)}function ft(t,e){return I(()=>t(e||{}))}const U=t=>rt(()=>t());function ct(t,e,s){let r=s.length,l=e.length,o=r,i=0,n=0,a=e[l-1].nextSibling,f=null;for(;i<l||n<o;){if(e[i]===s[n]){i++,n++;continue}for(;e[l-1]===s[o-1];)l--,o--;if(l===i){const p=o<r?n?s[n-1].nextSibling:s[o-n]:a;for(;n<o;)t.insertBefore(s[n++],p)}else if(o===n)for(;i<l;)(!f||!f.has(e[i]))&&e[i].remove(),i++;else if(e[i]===s[o-1]&&s[n]===e[l-1]){const p=e[--l].nextSibling;t.insertBefore(s[n++],e[i++].nextSibling),t.insertBefore(s[--o],p),e[l]=s[o]}else{if(!f){f=new Map;let h=n;for(;h<o;)f.set(s[h],h++)}const p=f.get(e[i]);if(p!=null)if(n<p&&p<o){let h=i,c=1,y;for(;++h<l&&h<o&&!((y=f.get(e[h]))==null||y!==p+c);)c++;if(c>p-n){const g=e[i];for(;n<p;)t.insertBefore(s[n++],g)}else t.replaceChild(s[n++],e[i++])}else i++;else e[i++].remove()}}}const z="_$DX_DELEGATE";function ut(t,e,s,r={}){let l;return et(o=>{l=o,e===document?t():S(e,t(),e.firstChild?null:void 0,s)},r.owner),()=>{l(),e.textContent=""}}function N(t,e,s,r){let l;const o=()=>{const n=document.createElement("template");return n.innerHTML=t,n.content.firstChild},i=()=>(l||(l=o())).cloneNode(!0);return i.cloneNode=i,i}function pt(t,e=window.document){const s=e[z]||(e[z]=new Set);for(let r=0,l=t.length;r<l;r++){const o=t[r];s.has(o)||(s.add(o),e.addEventListener(o,yt))}}function S(t,e,s,r){if(s!==void 0&&!r&&(r=[]),typeof e!="function")return k(t,e,r,s);j(l=>k(t,e(),l,s),r)}function yt(t){let e=t.target;const s=`$$${t.type}`,r=t.target,l=t.currentTarget,o=a=>Object.defineProperty(t,"target",{configurable:!0,value:a}),i=()=>{const a=e[s];if(a&&!e.disabled){const f=e[`${s}Data`];if(f!==void 0?a.call(e,f,t):a.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&o(e.host),!0},n=()=>{for(;i()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const a=t.composedPath();o(a[0]);for(let f=0;f<a.length-2&&(e=a[f],!!i());f++){if(e._$host){e=e._$host,n();break}if(e.parentNode===l)break}}else n();o(r)}function k(t,e,s,r,l){for(;typeof s=="function";)s=s();if(e===s)return s;const o=typeof e,i=r!==void 0;if(t=i&&s[0]&&s[0].parentNode||t,o==="string"||o==="number"){if(o==="number"&&(e=e.toString(),e===s))return s;if(i){let n=s[0];n&&n.nodeType===3?n.data!==e&&(n.data=e):n=document.createTextNode(e),s=x(t,s,r,n)}else s!==""&&typeof s=="string"?s=t.firstChild.data=e:s=t.textContent=e}else if(e==null||o==="boolean")s=x(t,s,r);else{if(o==="function")return j(()=>{let n=e();for(;typeof n=="function";)n=n();s=k(t,n,s,r)}),()=>s;if(Array.isArray(e)){const n=[],a=s&&Array.isArray(s);if(L(n,e,s,l))return j(()=>s=k(t,n,s,r,!0)),()=>s;if(n.length===0){if(s=x(t,s,r),i)return s}else a?s.length===0?F(t,n,r):ct(t,s,n):(s&&x(t),F(t,n));s=n}else if(e.nodeType){if(Array.isArray(s)){if(i)return s=x(t,s,r,e);x(t,s,null,e)}else s==null||s===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);s=e}}return s}function L(t,e,s,r){let l=!1;for(let o=0,i=e.length;o<i;o++){let n=e[o],a=s&&s[t.length],f;if(!(n==null||n===!0||n===!1))if((f=typeof n)=="object"&&n.nodeType)t.push(n);else if(Array.isArray(n))l=L(t,n,a)||l;else if(f==="function")if(r){for(;typeof n=="function";)n=n();l=L(t,Array.isArray(n)?n:[n],Array.isArray(a)?a:[a])||l}else t.push(n),l=!0;else{const p=String(n);a&&a.nodeType===3&&a.data===p?t.push(a):t.push(document.createTextNode(p))}}return l}function F(t,e,s=null){for(let r=0,l=e.length;r<l;r++)t.insertBefore(e[r],s)}function x(t,e,s,r){if(s===void 0)return t.textContent="";const l=r||document.createTextNode("");if(e.length){let o=!1;for(let i=e.length-1;i>=0;i--){const n=e[i];if(l!==n){const a=n.parentNode===t;!o&&!i?a?t.replaceChild(l,n):t.insertBefore(l,s):a&&n.remove()}else o=!0}}else t.insertBefore(l,s);return[l]}var R,G;const ht=(G=(R=globalThis.browser)==null?void 0:R.runtime)!=null&&G.id?globalThis.browser:globalThis.chrome,B=ht;async function gt(){return(await B.storage.local.get("authToken")).authToken||null}async function dt(t){await B.storage.local.set({authToken:t})}async function bt(){return(await B.storage.local.get("installationState")).installationState||{completed:!1,jwtVerified:!1}}async function wt(t){await B.storage.local.set({installationState:t})}var mt=N(`<div><div><div>üé§</div><h1>Scarlett</h1><p>AI Karaoke for SoundCloud</p></div><style>
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
        @keyframes bounce {
          0% { transform: scale(0.5); opacity: 0; }
          50% { transform: scale(1.1); }
          100% { transform: scale(1); opacity: 1; }
        }
      `),xt=N("<div><div></div><p>Setting up your account..."),Pt=N("<div><div>‚ú®</div><h2>All Set!</h2><p>Extension ready. This window will close automatically..."),St=N("<div><div>‚ö†Ô∏è</div><p></p><button>Try Again");const vt=()=>{const[t,e]=V("loading"),[s,r]=V(null),l=async()=>{try{await dt("scarlett_test_demo_user_12345"),await wt({completed:!0,jwtVerified:!0,timestamp:Date.now()}),console.log("[OnInstall] Demo account setup complete"),e("success"),setTimeout(()=>{window.close()},2500)}catch(o){console.error("[OnInstall] Setup failed:",o),r(o.message||"Failed to set up extension"),e("error")}};return ot(async()=>{const o=await gt(),i=await bt();if(o&&(i!=null&&i.completed)){console.log("[OnInstall] Already installed, closing window"),window.close();return}setTimeout(()=>{l()},1e3)}),(()=>{var o=mt(),i=o.firstChild,n=i.firstChild,a=n.nextSibling,f=a.nextSibling;return o.style.setProperty("min-height","100vh"),o.style.setProperty("background","linear-gradient(135deg, #1a1a2e 0%, #0f0f1e 100%)"),o.style.setProperty("display","flex"),o.style.setProperty("align-items","center"),o.style.setProperty("justify-content","center"),o.style.setProperty("font-family","-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"),i.style.setProperty("text-align","center"),i.style.setProperty("padding","60px"),i.style.setProperty("max-width","800px"),n.style.setProperty("font-size","120px"),n.style.setProperty("margin-bottom","40px"),n.style.setProperty("filter","drop-shadow(0 0 30px rgba(139, 92, 246, 0.5))"),a.style.setProperty("font-size","72px"),a.style.setProperty("font-weight","800"),a.style.setProperty("margin","0 0 20px 0"),a.style.setProperty("background","linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%)"),a.style.setProperty("background-clip","text"),a.style.setProperty("-webkit-background-clip","text"),a.style.setProperty("-webkit-text-fill-color","transparent"),a.style.setProperty("letter-spacing","-2px"),f.style.setProperty("font-size","24px"),f.style.setProperty("color","#a8a8a8"),f.style.setProperty("margin-bottom","60px"),f.style.setProperty("font-weight","300"),S(i,(()=>{var p=U(()=>t()==="loading");return()=>p()&&(()=>{var h=xt(),c=h.firstChild,y=c.nextSibling;return c.style.setProperty("width","80px"),c.style.setProperty("height","80px"),c.style.setProperty("border","4px solid rgba(139, 92, 246, 0.2)"),c.style.setProperty("border-top-color","#8b5cf6"),c.style.setProperty("border-radius","50%"),c.style.setProperty("margin","0 auto 30px"),c.style.setProperty("animation","spin 1s linear infinite"),y.style.setProperty("font-size","20px"),y.style.setProperty("color","#a8a8a8"),h})()})(),null),S(i,(()=>{var p=U(()=>t()==="success");return()=>p()&&(()=>{var h=Pt(),c=h.firstChild,y=c.nextSibling,g=y.nextSibling;return c.style.setProperty("font-size","100px"),c.style.setProperty("margin-bottom","30px"),c.style.setProperty("animation","bounce 0.5s ease-out"),y.style.setProperty("font-size","36px"),y.style.setProperty("font-weight","600"),y.style.setProperty("color","#fafafa"),y.style.setProperty("margin-bottom","20px"),g.style.setProperty("font-size","20px"),g.style.setProperty("color","#a8a8a8"),h})()})(),null),S(i,(()=>{var p=U(()=>t()==="error");return()=>p()&&(()=>{var h=St(),c=h.firstChild,y=c.nextSibling,g=y.nextSibling;return c.style.setProperty("font-size","80px"),c.style.setProperty("margin-bottom","30px"),c.style.setProperty("opacity","0.5"),y.style.setProperty("font-size","20px"),y.style.setProperty("color","#ef4444"),y.style.setProperty("margin-bottom","30px"),S(y,s),g.$$mouseout=P=>{P.currentTarget.style.background="rgba(139, 92, 246, 0.1)",P.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},g.$$mouseover=P=>{P.currentTarget.style.background="rgba(139, 92, 246, 0.2)",P.currentTarget.style.borderColor="rgba(139, 92, 246, 0.5)"},g.$$click=()=>window.location.reload(),g.style.setProperty("padding","12px 32px"),g.style.setProperty("font-size","18px"),g.style.setProperty("background","rgba(139, 92, 246, 0.1)"),g.style.setProperty("border","1px solid rgba(139, 92, 246, 0.3)"),g.style.setProperty("border-radius","8px"),g.style.setProperty("color","#8b5cf6"),g.style.setProperty("cursor","pointer"),g.style.setProperty("transition","all 0.2s"),h})()})(),null),o})()};pt(["click","mouseover","mouseout"]);ut(()=>ft(vt,{}),document.getElementById("root"));
